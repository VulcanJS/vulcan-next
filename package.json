{
  "name": "vulcan-next",
  "version": "0.4.0",
  "private": true,
  "scripts": {
    "dev": "next",
    "debug": "NODE_OPTIONS='--inspect' next",
    "build": "next build",
    "start": "next start",
    "link-vulcan": "./scripts/link-vulcan.sh # for linking a local copy of Vulcan NPM monorepo (don't forget to publish in Vulcan NPM first)",
    "update-link-vulcan": "yalc update",
    "typecheck": "tsc --noEmit --p src/tsconfig.json # in case of error with @vulcanjs/* package, check that src/types (eg simpl-schema) are up-to-date with vulcan-npm",
    "typecheck-watch": "tsc --noEmit --p src/tsconfig.json -w",
    "postbuild": "next-sitemap --config vulcan-next-sitemap.js",
    "test": "npm run test:unit && npm run test:e2e",
    "clean": "rm -Rf ./dist # clean various build folders",
    "postinstall": "",
    "build:static": "next build && next export",
    "start:static": "serve ./out",
    "build:docker": "docker build -f ./docker/vns.production.dockerfile -t vns .",
    "start:docker": "docker run -p 3000:3000 --env-file .env.development -it vns:latest",
    "build:test:docker": "docker build -f ./docker/cypress.dockerfile -t vns-test .",
    "start:mongo": "docker run --rm -p 27017:27017 -v \"$(pwd)/.mongo:/data/db\" --label vulcan-mongodb mongo:4.0.4 # will start or create & start the image + store data locally in .mongo folder + remove the container when stopped",
    "mongo": "yarn run start:mongo Â # shortcut for start:mongo",
    "start:test": "cross-env NODE_ENV=test npm run start # Start app in test mode",
    "test:e2e": "cross-env NODE_ENV=test npm run build && start-server-and-test start:test http://localhost:3000 'cypress:run'",
    "test:unit": "jest --testPathIgnorePatterns=tests/vns",
    "test:vn": "jest --testPathPattern=tests/vns # run tests for Vulcan Next itself, eg scripts (long) ",
    "test:docker": "docker run --env-file .env.development -it vns-test:latest",
    "cypress:open": "cross-env CYPRESS_coverage=false NODE_ENV=test  cypress open",
    "cypress:run": "cross-env CYPRESS_DEBUG=false CYPRESS_coverage=false NODE_ENV=test cypress run --headless",
    "coverage:e2e": "cross-env COVERAGE=1 npm run build && start-server-and-test start:test http://localhost:3000 'COVERAGE=1 cypress run'",
    "coverage:unit": "jest --coverage",
    "precoverage": "rm -rf .nyc_output || true # delete previous nyx instrumentation",
    "coverage": "npm run coverage:unit && npm run coverage:e2e",
    "postcoverage": "npm run report:combined # combine jest and cypress coverage reports",
    "mkdir:reports": "rm -Rf reports && mkdir reports || true # intermediate script",
    "precopy:reports": "npm run mkdir:reports # intermediate script",
    "copy:reports": "cp coverage-e2e/coverage-final.json reports/from-cypress.json && cp coverage-unit/coverage-final.json reports/from-jest.json # intermediate scripts",
    "precombine:reports": "npm run copy:reports && rm -Rf .nyc_output && mkdir .nyc_output || true # intermediate script",
    "combine:reports": "nyc merge reports && mv coverage.json .nyc_output/out.json # intermediate script",
    "prereport:combined": "npm run combine:reports # intermediate script",
    "report:combined": "nyc report --reporter lcov --report-dir coverage | exit 0 # intermediate script",
    "analyze-bundle": "cross-env ANALYZE=true npm run build",
    "analyze-bundle:storybook": "cross-env ANALYZE=true yarn run build:storybook",
    "lint-eslint": "eslint . --ext js,jsx,ts,tsx --max-warnings=0",
    "storybook": "start-storybook -p 6006 -s ./public",
    "build:storybook": "rm -Rf storybook-static && build-storybook -s ./public # TODO: we shouldn't need to remove, but Storybook 6.1 has a small bug and can't remove existing build automatically",
    "start:storybook-static": "serve storybook-static",
    "auto-changelog": "auto-changelog -u",
    "build-storybook": "build-storybook"
  },
  "dependencies": {
    "@apollo/client": "^3.2.0",
    "@emotion/react": "^11.4.0",
    "@emotion/styled": "^11.3.0",
    "@hapi/iron": "6.0.0",
    "@material-ui/core": "^5.0.0-alpha.37",
    "@material-ui/styles": "^4.11.4",
    "@mdx-js/loader": "^1.6.6",
    "@mdx-js/react": "^1.6.13",
    "@next/mdx": "^10.0.2",
    "@vulcanjs/demo": "^0.0.7",
    "@vulcanjs/mdx": "^0.2.3-alpha.0",
    "@vulcanjs/meteor-legacy": "^0.1.8",
    "@vulcanjs/mongo": "^0.1.8",
    "@vulcanjs/react-hooks": "^0.2.3",
    "@vulcanjs/react-ui": "^0.2.3",
    "apollo-server-express": "2.14.2",
    "babel-jest": "26.0.1",
    "babel-plugin-istanbul": "6.0.0",
    "clsx": "^1.1.1",
    "cors": "^2.8.5",
    "cross-env": "7.0.2",
    "debug": "4.1.1",
    "express": "4.17.1",
    "graphql": "15.4.0",
    "graphql-tag": "2.10.3",
    "gray-matter": "^4.0.2",
    "i18next": "^19.4.5",
    "i18next-browser-languagedetector": "^4.2.0",
    "i18next-http-backend": "^1.0.15",
    "lodash": "^4.17.19",
    "mongoose": "^5.9.19",
    "next": "^11.1.0",
    "next-connect": "^0.9.1",
    "next-i18next": "^5.1.0",
    "next-mdx-remote": "^2.1.3",
    "next-sitemap": "^1.4.17",
    "passport": "^0.4.1",
    "passport-local": "1.0.0",
    "polished": "^3.6.5",
    "postcss-nested": "^4.2.1",
    "react": "^17.0.1",
    "react-dom": "^17.0.1",
    "react-hook-form": "4.9.8",
    "react-i18next": "^11.5.0",
    "react-spring": "^8.0.27",
    "styled-jsx-plugin-postcss": "^3.0.2",
    "swr": "^0.4.0"
  },
  "devDependencies": {
    "@babel/core": "^7.10.2",
    "@storybook/testing-react": "^0.0.17",
    "@types/mongoose": "^5.7.27",
    "@types/node": "^13.7.6",
    "@types/react": "^16.9.23",
    "@types/react-dom": "^16.9.5",
    "@types/shelljs": "^0.8.8",
    "@typescript-eslint/eslint-plugin": "^2.21.0",
    "@typescript-eslint/parser": "^2.21.0",
    "babel-eslint": "^10.1.0",
    "babel-loader": "^8.1.0",
    "eslint": "^6.8.0",
    "eslint-plugin-react": "^7.18.3",
    "eslint-plugin-react-hooks": "^2.5.0",
    "graphql-voyager": "^1.0.0-rc.31",
    "react-is": "^16.13.1",
    "source-map-support": "^0.5.19",
    "storybook-css-modules-preset": "^1.0.5",
    "ts-loader": "^7.0.5",
    "ts-node": "^8.10.2",
    "typescript": "4.2.2",
    "yalc": "^1.0.0-pre.53"
  },
  "optionalDependencies": {
    "@cypress/code-coverage": "^3.8.1",
    "@cypress/webpack-preprocessor": "^5.4.1",
    "@istanbuljs/nyc-config-typescript": "^1.0.1",
    "@next/bundle-analyzer": "^9.4.4",
    "@next/plugin-storybook": "^10.0.2",
    "@storybook/addon-a11y": "^6.1.0",
    "@storybook/addon-actions": "^6.1.0",
    "@storybook/addon-backgrounds": "^6.1.0",
    "@storybook/addon-controls": "^6.1.0",
    "@storybook/addon-docs": "^6.1.0",
    "@storybook/addon-essentials": "^6.1.0",
    "@storybook/addon-links": "^6.1.0",
    "@storybook/addons": "^6.1.0",
    "@storybook/react": "^6.1.0",
    "@testing-library/cypress": "^6.0.0",
    "@testing-library/jest-dom": "^5.9.0",
    "@testing-library/react": "^10.2.0",
    "@testing-library/react-hooks": "^3.3.0",
    "@types/jest": "^25.2.3",
    "auto-changelog": "^2.2.1",
    "cypress": "4.8.0",
    "eslint-plugin-cypress": "2.11.1",
    "jest": "^26.0.1",
    "jest-transformer-mdx": "^2.2.0",
    "nyc": "^15.1.0",
    "serve": "^11.3.2",
    "shelljs": "^0.8.4",
    "start-server-and-test": "^1.11.0"
  }
}
